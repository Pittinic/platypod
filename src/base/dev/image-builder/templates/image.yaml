resources:
  # https://github.com/pulumi/pulumi-docker-build/blob/main/examples/yaml/Pulumi.yaml
  # https://www.pulumi.com/registry/packages/docker-build/api-docs/image/
  docker-image-builder:
    type: docker-build:Image
    options:
      dependsOn:
      - ${docker-registry-ingress}
    properties:
      context:
        location: src/base/dev/image-builder/images
      dockerfile:
        location: src/base/dev/image-builder/images/builder.Dockerfile
      exports: ${docker.exports}
      platforms: ${docker.build.platforms}
      push: ${docker.build.push}
      registries: ${docker.registries}
      tags:
      - ${docker.build.registry}${docker.build.namespace}${image-builder.name}:${image-builder.tag}
